<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TradeTrackFX | Transactions</title>
    <link rel="stylesheet" href="style.css" />
    <style>
        .transaction-card {
            background: var(--bg-card);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid var(--border);
            margin-bottom: 2rem;
        }

        .transaction-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
        }

        @media (max-width: 992px) {
            .transaction-grid {
                grid-template-columns: 1fr;
            }
        }

        .stat-mini-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .mini-card {
            background: rgba(255, 255, 255, 0.03);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid var(--border);
            text-align: center;
        }

        .mini-card h4 {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .mini-card p {
            font-size: 1.2rem;
            font-weight: 700;
        }

        .transaction-table-container {
            background: var(--bg-card);
            border-radius: 20px;
            border: 1px solid var(--border);
            overflow: hidden;
        }

        .transaction-table {
            width: 100%;
            border-collapse: collapse;
            color: #fff;
        }

        .transaction-table th,
        .transaction-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .transaction-table th {
            background: rgba(255, 255, 255, 0.02);
            color: var(--text-muted);
            font-weight: 600;
            font-size: 0.85rem;
            text-transform: uppercase;
        }

        .transaction-table tr:hover {
            background: rgba(255, 255, 255, 0.01);
        }

        .type-badge {
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 700;
        }

        .type-deposit {
            background: rgba(0, 230, 118, 0.1);
            color: #00E676;
        }

        .type-withdrawal {
            background: rgba(255, 82, 82, 0.1);
            color: #FF5252;
        }
    </style>
</head>

<body>
    <div class="layout">
        <button class="menu-toggle" id="sidebarToggle">‚ò∞</button>
        <aside class="sidebar" id="sidebar">
            <div class="logo">
                <img src="2.jpg" alt="TradeTrackFX" />
                <h2>TradeTrack<span>FX</span></h2>
            </div>
            <ul class="nav">
                <li><a href="index.html">üè† Dashboard</a></li>
                <li><a href="journal.html">üìì Journal</a></li>
                <li><a href="stats.html">üìä Stats</a></li>
                <li><a href="transactions.html" class="active">üí∞ Transactions</a></li>
            </ul>
            <button onclick="window.authLogout()" class="reset-btn"
                style="margin-top: 10px; background: rgba(255,255,255,0.05); color: #888;">
                <span>üö™</span> Logout
            </button>
        </aside>

        <main class="content">
            <header>
                <div class="dashboard-branding">
                    <h1 class="brand-title">
                        <span class="brand-gradient">Wallet</span> <span class="brand-highlight">&</span> <span
                            class="brand-gradient">Funding</span>
                    </h1>
                    <div class="brand-badge">Manage your capital flow</div>
                </div>
            </header>

            <div class="stat-mini-grid">
                <div class="mini-card">
                    <h4>Current Balance</h4>
                    <p id="account-balance" class="value">$0.00</p>
                </div>
                <div class="mini-card">
                    <h4>Initial Balance</h4>
                    <p id="initial-balance-display">$0.00</p>
                </div>
                <div class="mini-card">
                    <h4>Total Deposits</h4>
                    <p id="total-deposits" style="color: #00E676;">$0.00</p>
                </div>
                <div class="mini-card">
                    <h4>Total Withdrawals</h4>
                    <p id="total-withdrawals" style="color: #FF5252;">$0.00</p>
                </div>
            </div>

            <div class="transaction-grid">
                <!-- Transaction Form -->
                <div class="transaction-card">
                    <h3 style="margin-bottom: 20px;">New Transaction</h3>
                    <form id="transaction-form" style="display: flex; flex-direction: column; gap: 15px;">
                        <div>
                            <label
                                style="display: block; color: var(--text-muted); font-size: 0.85rem; margin-bottom: 5px;">Type</label>
                            <select id="transactionType" required
                                style="width: 100%; background: rgba(0, 0, 0, 0.3); border: 1px solid var(--border); color: #fff; padding: 12px 15px; border-radius: 10px;">
                                <option value="deposit">Deposit</option>
                                <option value="withdrawal">Withdrawal</option>
                            </select>
                        </div>
                        <div>
                            <label
                                style="display: block; color: var(--text-muted); font-size: 0.85rem; margin-bottom: 5px;">Amount
                                ($)</label>
                            <input type="number" id="transactionAmount" placeholder="0.00" required step="0.01"
                                style="width: 100%; background: rgba(0, 0, 0, 0.3); border: 1px solid var(--border); color: #fff; padding: 12px 15px; border-radius: 10px;">
                        </div>
                        <div>
                            <label
                                style="display: block; color: var(--text-muted); font-size: 0.85rem; margin-bottom: 5px;">Date</label>
                            <input type="date" id="transactionDate" required
                                style="width: 100%; background: rgba(0, 0, 0, 0.3); border: 1px solid var(--border); color: #fff; padding: 12px 15px; border-radius: 10px;">
                        </div>
                        <div>
                            <label
                                style="display: block; color: var(--text-muted); font-size: 0.85rem; margin-bottom: 5px;">Notes</label>
                            <input type="text" id="transactionNotes" placeholder="Optional notes..."
                                style="width: 100%; background: rgba(0, 0, 0, 0.3); border: 1px solid var(--border); color: #fff; padding: 12px 15px; border-radius: 10px;">
                        </div>
                        <button type="submit"
                            style="background: linear-gradient(135deg, var(--primary), #0077cc); color: white; border: none; padding: 15px; border-radius: 10px; font-weight: 600; cursor: pointer; margin-top: 10px;">
                            Process Transaction
                        </button>
                    </form>

                    <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--border);">
                        <h4
                            style="color: var(--text-muted); font-size: 0.8rem; margin-bottom: 15px; text-transform: uppercase;">
                            Adjust Initial Balance</h4>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="initialBalanceInput" placeholder="Set Initial Balance"
                                style="flex: 1; background: rgba(0,0,0,0.3); border: 1px solid var(--border); color: white; padding: 10px; border-radius: 8px;">
                        </div>
                        <p style="font-size: 0.75rem; color: #888; margin-top: 10px;">Note: Changing initial balance
                            affects all calculations.</p>
                    </div>
                </div>

                <!-- Transaction History -->
                <div class="transaction-table-container">
                    <div
                        style="padding: 20px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center;">
                        <h3 style="font-size: 1.1rem;">Transaction History</h3>
                    </div>
                    <div style="overflow-x: auto;">
                        <table class="transaction-table" id="transaction-log-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Type</th>
                                    <th>Amount</th>
                                    <th>Notes</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="transaction-log-body">
                                <!-- Data will be injected here -->
                                <tr>
                                    <td colspan="5" style="text-align: center; color: #888; padding: 40px;">No
                                        transactions found</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-storage-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script src="auth.js"></script>
    <script src="scripts.js"></script>

    <script>
        // Specific logic for this page if needed, otherwise scripts.js handles most
        document.addEventListener('DOMContentLoaded', () => {
            // Re-initialize any UI specific parts if needed
            // But updateAllViews() in scripts.js should handle rendering if elements exist
        });

        // Override/Extend renderTransactionLog for the table format if needed
        // However, I will update scripts.js to be smart about where it renders.
    </script>
</body>

</html>